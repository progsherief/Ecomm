import{a as R}from"./chunk-PVWKXDWJ.js";import{a as k,b as _,c as q,d as I,e as D,f as E,h as G,i as M,j,l as V}from"./chunk-SYJAIBDB.js";import{g as N,h as A}from"./chunk-QYLJZLII.js";import{h as b,w as x}from"./chunk-I3CNLBVI.js";import{Ab as L,Bb as h,Ib as s,Jb as y,Pb as T,Ra as m,Sa as F,Sb as S,da as w,gb as p,ib as C,nb as u,rb as l,sb as t,tb as v}from"./chunk-ND6PNDCF.js";var H=(e,n)=>({"is-valid":e,"is-invalid":n});function U(e,n){e&1&&(l(0,"p",14),s(1,"Email Is Required"),t())}function $(e,n){e&1&&(l(0,"p",14),s(1,"Enter valid Email"),t())}function z(e,n){if(e&1&&(l(0,"div",7),p(1,U,2,0,"p",14)(2,$,2,0),t()),e&2){let d,o=h();m(),u(1,(d=o.loginForm.get("email"))!=null&&d.getError("required")?1:(d=o.loginForm.get("email"))!=null&&d.getError("email")?2:-1)}}function B(e,n){e&1&&(l(0,"p",14),s(1,"password Is Required"),t())}function J(e,n){e&1&&(l(0,"p",14),s(1,"Enter valid password"),t())}function K(e,n){if(e&1&&(l(0,"div",7),p(1,B,2,0,"p",14)(2,J,2,0),t()),e&2){let d,o=h();m(),u(1,(d=o.loginForm.get("password"))!=null&&d.getError("required")?1:(d=o.loginForm.get("password"))!=null&&d.getError("pattern")?2:-1)}}function O(e,n){e&1&&(l(0,"span"),v(1,"i",15),t())}function P(e,n){if(e&1&&(l(0,"p",13),s(1),t()),e&2){let d=h();m(),y(d.msgError)}}function Q(e,n){e&1&&(l(0,"p"),s(1,"Success"),t())}var oe=(()=>{let n=class n{constructor(o,g){this._AuthService=o,this._Router=g,this.isSuccess=!1,this.msgError="",this.isLoading=!1,this.loginForm=new D({email:new E(null,[_.required,_.email]),password:new E(null,[_.required,_.pattern(/^\w{6,}$/)])})}loginSubmit(){this.isLoading=!0,this.loginForm.valid?this._AuthService.setLoginForm(this.loginForm.value).subscribe({next:o=>{console.log(o),this.isLoading=!1,o.message=="success"&&(this.isSuccess=!0,localStorage.setItem("userToken",o.token),this._AuthService.saveUserData(),setTimeout(()=>{this._Router.navigate(["/home"])},1e3))},error:o=>{this.msgError=o.error.message,console.log(o),this.isLoading=!1}}):(this.loginForm.setErrors({mismatch:!0}),this.loginForm.markAllAsTouched(),this.isLoading=!1)}};n.\u0275fac=function(g){return new(g||n)(F(R),F(N))},n.\u0275cmp=w({type:n,selectors:[["app-login"]],standalone:!0,features:[T],decls:23,vars:14,consts:[[1,"bg-main-light","show","p-2","my-2","rounded-4"],[1,"container"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["id","email","type","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"w-50","alert","alert-danger"],["for","password"],["id","password","type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end","gap-4"],["routerLink","/forgot",1,"link-primary"],["type","submit",1,"btn-main"],[1,"alert","alert-danger","w-50","m-0"],["clas","m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(g,i){if(g&1&&(l(0,"section",0)(1,"div",1)(2,"h1",2),s(3,"Login Now:"),t(),l(4,"form",3),L("ngSubmit",function(){return i.loginSubmit()}),l(5,"div",4)(6,"label",5),s(7,"Email"),t(),v(8,"input",6),p(9,z,3,1,"div",7),t(),l(10,"div",4)(11,"label",8),s(12,"password"),t(),v(13,"input",9),p(14,K,3,1,"div",7),t(),l(15,"div",10)(16,"a",11),s(17,"forgot password"),t(),l(18,"button",12),s(19,"Login "),p(20,O,2,0,"span"),t()(),p(21,P,2,1,"p",13)(22,Q,2,0,"p"),t()()()),g&2){let r,c,a,f;m(4),C("formGroup",i.loginForm),m(4),C("ngClass",S(8,H,!((r=i.loginForm.get("email"))!=null&&r.errors)&&(((r=i.loginForm.get("email"))==null?null:r.touched)||((r=i.loginForm.get("email"))==null?null:r.dirty)),((r=i.loginForm.get("email"))==null?null:r.errors)&&(((r=i.loginForm.get("email"))==null?null:r.touched)||((r=i.loginForm.get("email"))==null?null:r.dirty)))),m(),u(9,(c=i.loginForm.get("email"))!=null&&c.errors&&((c=i.loginForm.get("email"))!=null&&c.touched||(c=i.loginForm.get("email"))!=null&&c.dirty)?9:-1),m(4),C("ngClass",S(11,H,!((a=i.loginForm.get("password"))!=null&&a.errors)&&(((a=i.loginForm.get("password"))==null?null:a.touched)||((a=i.loginForm.get("password"))==null?null:a.dirty)),((a=i.loginForm.get("password"))==null?null:a.errors)&&(((a=i.loginForm.get("password"))==null?null:a.touched)||((a=i.loginForm.get("password"))==null?null:a.dirty)))),m(),u(14,(f=i.loginForm.get("password"))!=null&&f.errors&&((f=i.loginForm.get("password"))!=null&&f.touched||(f=i.loginForm.get("password"))!=null&&f.dirty)?14:-1),m(6),u(20,i.isLoading?20:-1),m(),u(21,i.msgError?21:-1),m(),u(22,i.isSuccess?22:-1)}},dependencies:[V,G,k,q,I,M,j,x,b,A]});let e=n;return e})();export{oe as LoginComponent};
