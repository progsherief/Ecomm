<section class="bg-main-light show p-2 my-2 rounded-4 ">
    <div class="container">
        <h1 class="h2 text-main ">Register Now:</h1>

        <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()">
            <div class="my-2">
                <label for="name">Name</label>
                <input id="name"
                    [ngClass]="{ 'is-valid':!registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)  ,
                                'is-invalid':registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty) }" 
                    type="text" class="form-control" formControlName="name">
                @if(registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)  )
                {
                <div class="alert alert-danger w-50 ">
                    @if(registerForm.get('name')?.getError('required'))
                    {
                    <p class="m-0">Name Is Required</p>
                    }
                    @else if(registerForm.get('name')?.getError('minlength'))
                    {
                    <p class="m-0">Name should be more than or equal 3 chars</p>
                    }
                    @else if(registerForm.get('name')?.getError('maxlength'))
                    {
                    <p class="m-0">Name should be more than or equal 20 chars</p>
                    }
                </div>
                }
            </div>

            <div class="my-2">
                <label for="email">Email</label>
                <input id="email" 
                [ngClass]="{'is-valid':!registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)  ,
                                'is-invalid':registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty) }"
                type="email" class="form-control" formControlName="email">

                @if(registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty))
                {
                <div class="w-50 alert alert-danger">
                    @if(registerForm.get('email')?.getError('required')){
                    <p clas="m-0">Email Is Required</p>
                    }
                    @else if(registerForm.get('email')?.getError('email')){
                    <p clas="m-0">Enter valid Email</p>
                    }
                </div>
                }
            </div>

            <div class="my-2">
                <label for="phone">Phone</label>
                <input id="phone" type="phone" class="form-control" formControlName="phone"
                [ngClass]="{ 'is-valid':!registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)  ,
                                'is-invalid':registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty) }" >

                @if(registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty))
                {
                <div class="w-50 alert alert-danger">
                    @if(registerForm.get('phone')?.getError('required')){
                    <p clas="m-0">Phone Is Required</p>
                    }
                    @else if(registerForm.get('phone')?.getError('pattern')){
                    <p clas="m-0">Enter valid Phone</p>
                    }
                </div>
                }

            </div>

            <div class="my-2">
                <label for="password">password</label>
                <input id="password" type="password" class="form-control" formControlName="password"
                [ngClass]="{ 'is-valid':!registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)  ,
                'is-invalid':registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty) }" >

                @if(registerForm.get('password')?.errors &&(registerForm.get('password')?.touched || registerForm.get('password')?.dirty))
                {
                <div class="w-50 alert alert-danger">
                    @if(registerForm.get('password')?.getError('required')){
                    <p clas="m-0">password Is Required</p>
                    }
                    @else if(registerForm.get('password')?.getError('pattern')){
                    <p clas="m-0">Enter valid password</p>
                    }
                </div>
                }

            </div>

            <div class="my-2">
                <label for="rePassword">RePassword</label>
                <input id="rePassword" type="password" class="form-control" formControlName="rePassword"
                [ngClass]="{ 'is-valid':!registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)  ,
                'is-invalid':registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty) }" >


                @if(registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched|| registerForm.get('rePassword')?.dirty))
                {
                <p class="w-50 alert alert-danger m-0">Password confirmation is incorrect</p>
                }
            </div>

            <button type="submit" class="btn-main ms-auto d-block">Register
               @if(isLoading){
                <span><i class="fas fa-spin  fa-spinner"></i></span>
            }
            </button>
            @if(msgError){
            <p class="alert alert-danger w-50 m-0">{{msgError}}</p>
        }
        @if(isSuccess){

        <p>Success</p>
    }
        </form>
    </div>
</section>