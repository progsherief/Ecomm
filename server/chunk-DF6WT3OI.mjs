import './polyfills.server.mjs';
import{a as T}from"./chunk-ORLFTC77.mjs";import"./chunk-B5YGRSSX.mjs";import{l as P}from"./chunk-AZJOESJL.mjs";import{o as I}from"./chunk-7PJ5ATBG.mjs";import{Ab as C,Hb as s,Ib as k,Jb as _,Ma as v,Ob as w,Qa as l,Qb as y,Ra as b,Ub as E,Wb as D,aa as x,hb as f,ka as p,la as u,ob as g,pb as h,qb as r,rb as n,sb as m,vb as S,zb as d}from"./chunk-25LRG7DY.mjs";import"./chunk-VVCT4QZE.mjs";var F=(o,a)=>a.product.id,V=o=>["/orders",o];function U(o,a){if(o&1){let c=S();r(0,"div",5)(1,"div",7),m(2,"img",8),n(),r(3,"div",9)(4,"div")(5,"h3",10),s(6),n(),r(7,"p",11),s(8),n(),r(9,"button",12),d("click",function(){let e=p(c).$implicit,i=C();return u(i.removeItem(e.product.id))}),m(10,"i",13),n()(),r(11,"div",14)(12,"span",15),d("click",function(){let e=p(c).$implicit,i=C();return u(i.UpdateCartProdQty(e.product.id,e.count+1))}),m(13,"i",16),n(),r(14,"span"),s(15),n(),r(16,"span",15),d("click",function(){let e=p(c).$implicit,i=C();return u(i.UpdateCartProdQty(e.product.id,e.count-1))}),m(17,"i",17),n()()()()}if(o&2){let c=a.$implicit;l(2),f("src",c.product.imageCover,v)("alt",c.product.title),l(4),_(" ",c.product.title," "),l(2),_("Price: ",c.price," "),l(7),k(c.count)}}var B=(()=>{let a=class a{constructor(t){this._CartService=t,this.cartDetails={}}ngOnInit(){this._CartService.GetLoggedUserCart().subscribe({next:t=>{this.cartDetails=t.data,console.log(t)},error:t=>{}})}removeItem(t){this._CartService.RemoveSpecificCartItem(t).subscribe({next:e=>{console.log(e),this.cartDetails=e.data,this._CartService.countNumber.set(e.numOfCartItems)},error:e=>{console.log(e)}})}UpdateCartProdQty(t,e){this._CartService.UpdateCartProdQty(t,e).subscribe({next:i=>{console.log(i),this.cartDetails=i.data},error:i=>{console.log(i)}})}ClearCart(){this._CartService.ClearCart().subscribe({next:t=>{console.log(t),t.message=="success"&&(this.cartDetails={},this._CartService.countNumber.set(0))},error:t=>{console.log(t)}})}};a.\u0275fac=function(e){return new(e||a)(b(T))},a.\u0275cmp=x({type:a,selectors:[["app-cart"]],standalone:!0,features:[w],decls:13,vars:7,consts:[[1,"bg-main-light","rounded-4","shadow","p-4","my-2","w-75","mx-auto"],[1,"d-flex","align-items-center","justify-content-between"],[1,"h2"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-main"],[1,"row","mb-1","border-bottom"],[1,"btn-main","mt-2",3,"routerLink"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","aligh-items-center","justify-content-between"],[1,"h-5"],[1,"text-main","m-0"],[1,"text-danger","cr","btn","p-0",3,"click"],[1,"fa-solid","fa-trash"],[1,"d-flex","aligh-items-center","gap-2"],[1,"text-main","cr",3,"click"],[1,"fa-solid","fa-circle-plus","fa-2xl"],[1,"fa-solid","fa-circle-minus","fa-2xl"]],template:function(e,i){e&1&&(r(0,"section",0)(1,"div",1)(2,"h1",2),s(3,"Shop Cart"),n(),r(4,"button",3),d("click",function(){return i.ClearCart()}),s(5,"Clear Cart"),n()(),r(6,"p",4),s(7),E(8,"currency"),n(),g(9,U,18,5,"div",5,F),r(11,"button",6),s(12,"Orders"),n()()),e&2&&(l(7),_("Total Cart Price: ",D(8,2,i.cartDetails.totalCartPrice,"GBP"),""),l(2),h(i.cartDetails.products),l(2),f("routerLink",y(5,V,i.cartDetails._id)))},dependencies:[I,P]});let o=a;return o})();export{B as CartComponent};
