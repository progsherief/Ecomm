import './polyfills.server.mjs';
import{a as V}from"./chunk-4JLTDLQN.mjs";import{a as P,b as l,c as F,d as N,e as g,f as c,h as R,i as G,j as T,l as A}from"./chunk-TJ6WV45J.mjs";import"./chunk-B5YGRSSX.mjs";import{k as E}from"./chunk-AZJOESJL.mjs";import"./chunk-7PJ5ATBG.mjs";import{Ab as d,Hb as a,Ob as b,Qa as u,Ra as x,aa as h,fb as y,hb as m,ka as f,la as w,mb as S,qb as n,rb as o,sb as p,vb as C,zb as _}from"./chunk-25LRG7DY.mjs";import"./chunk-VVCT4QZE.mjs";function D(r,s){if(r&1){let i=C();n(0,"form",2),_("ngSubmit",function(){f(i);let t=d();return w(t.ForgotPassword())}),n(1,"div")(2,"label",3),a(3,"Email"),o(),p(4,"input",4),o(),n(5,"button",5),a(6,"Verify Email"),o()()}if(r&2){let i=d();m("formGroup",i.verifyEmail),u(5),m("disabled",i.verifyEmail.invalid)}}function q(r,s){if(r&1){let i=C();n(0,"form",2),_("ngSubmit",function(){f(i);let t=d();return w(t.VerifyResetCode())}),n(1,"div")(2,"label",6),a(3,"Code"),o(),p(4,"input",7),o(),n(5,"button",5),a(6,"Verify Code"),o()()}if(r&2){let i=d();m("formGroup",i.verifyCode),u(5),m("disabled",i.verifyCode.invalid)}}function M(r,s){if(r&1){let i=C();n(0,"form",2),_("ngSubmit",function(){f(i);let t=d();return w(t.ResetPassword())}),n(1,"div")(2,"label",8),a(3,"Email"),o(),p(4,"input",9),o(),n(5,"div")(6,"label",10),a(7,"Password"),o(),p(8,"input",11),o(),n(9,"button",5),a(10,"New Password"),o()()}if(r&2){let i=d();m("formGroup",i.resetPassword),u(9),m("disabled",i.resetPassword.invalid)}}var z=(()=>{let s=class s{constructor(e,t){this._AuthService=e,this._Router=t,this.step=1,this.verifyEmail=new g({email:new c(null,[l.required,l.email])}),this.verifyCode=new g({resetCode:new c(null,[l.required,l.pattern(/^[0-9]{5}/)])}),this.resetPassword=new g({email:new c(null,[l.required,l.email]),newPassword:new c(null,[l.required,l.pattern(/^\w{6,}$/)])})}ForgotPassword(){let e=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(e),this._AuthService.ForgotPassword(this.verifyEmail.value).subscribe({next:t=>{console.log(t),t.statusMsg==="success"&&(this.step=2)},error:t=>{console.log(t)}})}VerifyResetCode(){this._AuthService.VerifyResetCode(this.verifyCode.value).subscribe({next:e=>{console.log(e),e.status==="Success"&&(this.step=3)},error:e=>{console.log(e)}})}ResetPassword(){this._AuthService.ResetPassword(this.resetPassword.value).subscribe({next:e=>{console.log(e),localStorage.setItem("userToken",e.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:e=>{console.log(e)}})}};s.\u0275fac=function(t){return new(t||s)(x(V),x(E))},s.\u0275cmp=h({type:s,selectors:[["app-forgotpassword"]],standalone:!0,features:[b],decls:6,vars:1,consts:[[1,"text-center","text-main","my-2"],[1,"bg-main-light","shadow","rounded-4","p-3",3,"formGroup"],[1,"bg-main-light","shadow","rounded-4","p-3",3,"ngSubmit","formGroup"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],[1,"btn-main",3,"disabled"],["for","resetCode"],["formControlName","resetCode","type","text","id","resetCode",1,"form-control"],["for","reEmail"],["formControlName","email","type","email","id","reEmail","readonly","",1,"form-control"],["for","resetPassword"],["formControlName","newPassword","type","password","id","resetPassword",1,"form-control"]],template:function(t,v){t&1&&(n(0,"section")(1,"h1",0),a(2,"forgot password"),o(),y(3,D,7,2,"form",1)(4,q,7,2)(5,M,11,2),o()),t&2&&(u(3),S(3,v.step==1?3:v.step==2?4:v.step==3?5:-1))},dependencies:[A,R,P,F,N,G,T]});let r=s;return r})();export{z as ForgotpasswordComponent};
